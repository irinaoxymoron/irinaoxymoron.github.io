<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title> Irina Andrianova </title>
	<link href='css/style.css' media='screen, projection' rel='stylesheet' type='text/css' />
	<link href="../img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body>
<div class="blog-wrapper">
<div class="blog-container">
    <nav class="navigation">
        <ul class="navigation-list">
            <li class="navigation-item"><a class="navigation-link" href="../index.html">Main</a></li>
        </ul>
    </nav>
    <div class="blog-content">
        <div class="blog-title">Пакетное сжатие и обработка растровых изображений</div>
        <div class="blog-article">
            <p>Для обработки и оптимизации изображений можно использовать набор консольных утилит ImageMagick.</p>
            <p><strong>Пример команды для оптимизации одного изображения в формате jpeg:</strong></p>
            <p class="blog-code">convert INPUT.jpg -sampling-factor 4:2:0 -strip [-resize WxH] [-quality N] [-interlace JPEG] [-colorspace Gray/sRGB] OUTPUT.jpg <br>
                convert example.jpg -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace sRGB example_converted.jpg</p>
            <p>Параметры, указанные в [скобках], опциональны. Параметр -strip удаляет метаданные. Параметр -resize отвечает за изменение размера, -quality задаёт уровень сжатия, -interlace делает jpeg прогрессивным, -сolorspace Gray сделает изображение черно-белым, -sampling-factor связан с дискретизацией цветности (цветовая субдискретизация), если этот параметр опущен, библиотека JPEG будет использовать собственные значения по умолчанию. Представление схемы — J:a:b (например, 4:2:2) — первая цифра означает ширину области усреднения (в данном случае 4 пикселя), вторая цифра — число результирующих значений цветов в первой строке, третья цифра — число результирующих цветов во второй строке. Всего строк 2 (высота области — 4 пикселя). Также в документации указано, что оптимальные таблицы кодирования Хаффмана вычисляются по умолчанию.</p>
            <p>Чтобы jpeg сжимался без изменения качества сжатия, достаточно пропустить этот параметр. Если не указать степень сжатия -quality, то по умолчанию будет использоваться оценочное качество вашего входного изображения, когда оно может быть определено (в противном случае 92) и оно не будет изменено. Попытка указать параметр -quality без величины N приведет к ошибке. </p>
            <p><strong>Пример команды для оптимизации одного изображения в формате png или gif:</strong></p>
            <p class="blog-code">convert INPUT.gif_or_png -strip [-resize WxH] [-alpha Remove] OUTPUT.png <br>
                convert example.png -strip example_converted.png</p>
            <p>Параметр -alpha Remove используется для удаления альфа-каналов, если все пиксели непрозрачны.</p>
            <p><strong>Пакетное преобразование.</strong></p>
            <p class="blog-code">find . -name '*.jpg' -execdir mogrify -resize 820x {} \;</p>
            <p>Команда find обходит директории, mogrify меняет исходные изображения на обработанные.</p>
            <p><strong>Финальные команды по пакетной оптимизации всех изображений могут выглядеть так:</strong></p>
            <p class="blog-code">find . -name '*.jpg' -execdir mogrify -sampling-factor 4:2:0 -strip -quality 85 -interlace JPEG -colorspace sRGB {} \; <br>
                find . -name '*.png' -execdir mogrify -strip {} \; <br>
                find . -name '*.gif' -execdir mogrify -strip {} \;</p>
            <p>ImageMagick это огромный многоплатформенный комплекс утилит, который ориентирован на работу в консоли и автоматизацию обработки изображений. Для пакетного изменения изображений можно воспользоваться возможностями командной оболочки, в связи с чем возникают десятки способов решения данного вопроса и преобразование с помощью команды find — лишь один из них.</p>
        </div>
    </div>
</div>
<footer class="footer">
    <div class="container">
        <p class="footer__content"><span id="footerContent">Irina Andrianova</span> &copy; 2019</p>
        <div class="footer__socials col-xs-12">
            <div class="footer__wrap">
                <a target="_blank" href="https://www.behance.net/irinaoxymoron" class="footer__link" title="Behance">
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="30px" height="30px" viewBox="0 0 49.652 49.652" style="enable-background:new 0 0 49.652 49.652; fill: inherit;"
	 xml:space="preserve">
<g>
	<g>
		<g>
			<path d="M20.894,20.686c0-1.9-1.293-1.9-1.293-1.9h-0.685h-4.634H14.28v4.078h4.991C20.134,22.864,20.894,22.589,20.894,20.686z"
				/>
			<path d="M33.221,22.864c-2.821,0-3.215,2.814-3.215,2.814h6.002C36.008,25.68,36.045,22.864,33.221,22.864z"/>
			<path d="M19.601,25.68h-5.318v4.886h4.711c0.08,0,0.198,0.004,0.339,0c0.757-0.019,2.196-0.235,2.196-2.374
				C21.529,25.656,19.601,25.68,19.601,25.68z"/>
			<path d="M24.826,0C11.137,0,0,11.137,0,24.826c0,13.688,11.137,24.826,24.826,24.826c13.688,0,24.826-11.138,24.826-24.826
				C49.652,11.137,38.516,0,24.826,0z M29.219,16.615h7.539v2.251h-7.539V16.615z M25.407,28.419c0,5.577-5.806,5.395-5.806,5.395
				h-5.318h-0.156h-4.034V15.539h4.034h0.156h5.318c2.891,0,5.172,1.597,5.172,4.867c0,3.269-2.788,3.477-2.788,3.477
				C25.66,23.882,25.407,28.419,25.407,28.419z M39.512,28.119h-9.471c0,3.396,3.217,3.182,3.217,3.182
				c3.036,0,2.93-1.966,2.93-1.966h3.219c0,5.218-6.254,4.859-6.254,4.859c-7.503,0-7.021-6.985-7.021-6.985
				s-0.007-7.022,7.021-7.022C40.549,20.187,39.51,28.119,39.512,28.119z"/>
		</g>
	</g>
</g>
                </svg>
                </a>
                <a target="_blank" href="https://github.com/irinaoxymoron" class="footer__link" title="GitHub">
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 96 96" width="30px" height="30px"  style="enable-background:new 0 0 96 96; fill: inherit;" xml:space="preserve">
<g>
	<path style="fill:inherit;" d="M48.07,47.746c-0.022,0-0.047-0.001-0.07-0.002c-0.024,0.001-0.049,0.002-0.071,0.002
		c-5.957,0-11.206-1.508-14.308,1.34c-1.859,1.709-2.642,3.768-2.642,5.985c0,9.261,7.42,10.398,16.949,10.398h0.142
		c9.529,0,16.949-1.138,16.949-10.398c0-2.218-0.783-4.276-2.642-5.985C59.275,46.238,54.027,47.746,48.07,47.746z M39.968,60.401
		c-1.813,0-3.283-2.036-3.283-4.547s1.47-4.546,3.283-4.546s3.285,2.035,3.285,4.546S41.781,60.401,39.968,60.401z M56.031,60.401
		c-1.814,0-3.285-2.036-3.285-4.547s1.471-4.546,3.285-4.546c1.812,0,3.283,2.035,3.283,4.546S57.844,60.401,56.031,60.401z M48,0
		C21.489,0,0,21.49,0,48s21.489,48,48,48c26.509,0,48-21.49,48-48S74.509,0,48,0z M52.378,67.701c-0.86,0-2.57,0.002-4.378,0.004
		c-1.809-0.002-3.52-0.004-4.379-0.004c-3.803,0-18.863-0.291-18.863-18.445c0-4.177,1.432-7.233,3.775-9.778
		c-0.374-0.923-0.393-6.165,1.602-11.183c0,0,4.576,0.502,11.5,5.253c1.451-0.401,3.908-0.601,6.365-0.601
		c2.455,0,4.912,0.199,6.365,0.601c6.923-4.751,11.498-5.253,11.498-5.253c1.995,5.018,1.977,10.26,1.603,11.183
		c2.344,2.545,3.776,5.602,3.776,9.778C71.242,67.41,56.181,67.701,52.378,67.701z"/>
</g>
                    </svg>
                </a>
                <a target="_blank" href="https://ru.pinterest.com/irinaoxymoron/" class="footer__link" title="Pinterest">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 96 96" style="enable-background:new 0 0 96 96;" xml:space="preserve" width="30px" height="30px">
<g>
	<path d="M48,0C21.488,0,0,21.49,0,48c0,26.511,21.488,48,48,48c26.51,0,48-21.489,48-48   C96,21.49,74.51,0,48,0z M51.283,59.383c-3.078-0.238-4.369-1.762-6.779-3.227c-1.326,6.955-2.947,13.624-7.748,17.107   c-1.482-10.514,2.176-18.409,3.873-26.792c-2.895-4.874,0.35-14.685,6.457-12.267c7.514,2.973-6.508,18.121,2.904,20.014   c9.83,1.975,13.842-17.054,7.748-23.242c-8.807-8.934-25.633-0.203-23.564,12.59c0.504,3.128,3.734,4.076,1.291,8.393   c-5.637-1.25-7.318-5.693-7.102-11.621c0.348-9.699,8.717-16.491,17.107-17.431c10.613-1.188,20.576,3.896,21.951,13.88   C68.971,48.057,62.631,60.262,51.283,59.383z" />
</g>
</svg>
                </a>
            </div>
        </div>
    </div>
</footer>
</div>
<!-- scripts -->
<script src="js/js-main.js"></script>
</body>
</html>